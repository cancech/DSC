# DSC - Dead Simple Calculator

This is just a simple calculator application, intended as the start of my foray into C#.

![Screenshot](/Screenshot/main_window.png?raw=true "Screenshot")

## Tools Employed

All development was performed in Linux using Mono and the Monodevelop IDE. GTK-Sharp was used for the GUI, and the Stetic Designer within Monodevelop was used to generate the calculator GUI.

## Architecture

The architecture of the application is relatively straight forward. MVC is employed for the purpose of GUI / Logic separation and communication. `MainWindow` is the non-autogenerated portion of the GUI and `CalcModel` is the model for facilitating the interaction with the calculator logic. The backend will push `string` updates to the GUI for display to the user, and any user interactions are presented to the backend in the form of a `Command`. Each button available to the user has an enumerated `Command` that the backend will process.

`CommandManager` is responsible for receiving the user `Command`, and it will direct it to the appropriate instance of `ICommandProcessor` (each instance must be first registered with `CommandManager`). The implementation of `ICommandProcessor` is reponsible for the functionality of each `Command`. For example, `NumericCommandProcessor` will process all commands pertaining to the numeric input from the user (digits, decimal point, and sign inversion), while `OperationCommandProcessor` will process all commands pertaining to mathematical operations (add, subtract, multiply, divide, and power).

At the core, and bringing all loose ends together, is `Calculator`. This tracks the current state of the backend (primarily the user numeric input, and the chosen operation). The last piece of the puzzle is `InputNumber`, this class is responsible for processing the user numeric input and converting the user input into a `decimal`. It is the single most complex class, as it has to deal with the largest number of possible permutations.

# DSCTest

This project contains the unit tests, which were created for the purpose of proving the functionality of the whole application. With the exception of ProgramTest, all are intended to verify the functionality of a single class. ProgramTest is an acceptance or regression test for the whole program. It runs the entire calculator (minus the GUI) and interacts with it as if it were a user. In this manner the user interaction is simulated and the test can verify that the application in its entirety works as expected. Thus, in principle, the only manual testing truly required is to verify that each button triggers the appropriate command.

# Known Issues

* This is a simplistic calculator with no concept of order of operations and the like. Each operation is performed as it is input, rather than waiting for the final equals to be pressed. For example, 1 + 2 * 3 will be evaluated as (1 + 2) * 3 and give a result of 9, rather than the expected 7.

* Division by 0 will display a `NaN` result, however for the purposes of additional chained operations it will be treated as 0. For example, it will perform the following calculation 1 / 0 + 2 = 2

* The numeric type of `decimal` is used for the purpose of calculation. This means that the numeric range of the calculator is limited to ±1.0e-28 to ±7.9228e28. When numbers go beyond this range, the result will be `NaN`. The use of values outside of this range is undefined behavior.

* The Clear (C) button has focus when the application is first launched. Keyboard input for entry is not supported.

## Future Work

While this project has served its purpose, and I will cease any further development of it, there are two lingering issues that I would address in a future revision:

* `InputNumber Number` field within `Calculator` is essentially a `singleton` value which is shared amongst various `IOperators`, `ICommandProcessors`, and the `Calculator` itself. Far from an ideal situation, and something which should be refactored to avoid the risk of "spaghetti code".

* `InputNumber`, while not large, feels like it's trying to do too many things. Could be worthwhile investigating ways in which to refactor it (specifically separating the state tracking and the `string` management portion of the class).
